# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ–ø—ã—Ç–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üéØ –¶–µ–ª—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
–£–ª—É—á—à–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ø—ã—Ç–∫–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

### üìä –ú–∞—Å—à—Ç–∞–± –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ú–æ–¥–µ–ª–∏ –ë–î:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ TestAttempt, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –¥–ª—è —Ç–∞–π–º–µ—Ä–æ–≤
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ø—ã—Ç–∫–∞–º–∏, –æ—á–∏—Å—Ç–∫–∞ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö
- **–°–µ—Ä–≤–∏—Å—ã:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞, —Ç–∞–π–º–µ—Ä—ã —Å delta
- **API:** –ó–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞, —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ø—ã—Ç–∫–∞–º, –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö

---

## 1. –°—Ç–∞—Ç—É—Å—ã –ø–æ–ø—ã—Ç–æ–∫ –∏ –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

### 1.1 –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã TestAttempt
```python
class TestAttemptStatus(Enum):
    STARTED = "started"      # –¢–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω
    IN_PROGRESS = "in_progress"  # –ê–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å—Ç—É–¥–µ–Ω—Ç
    COMPLETED = "completed"  # –ó–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ
    FAILED = "failed"        # –ó–∞–≤–µ—Ä—à–µ–Ω —Å –æ—à–∏–±–∫–æ–π
    EXPIRED = "expired"      # –ò—Å—Ç–µ–∫–ª–æ –≤—Ä–µ–º—è
```

### 1.2 –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã:
- `STARTED` ‚Üí `IN_PROGRESS`: –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–æ–º
- `IN_PROGRESS` ‚Üí `COMPLETED`: –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `IN_PROGRESS` ‚Üí `FAILED`: –ü—Ä–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π –æ—à–∏–±–∫–µ –∏–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
- `IN_PROGRESS` ‚Üí `EXPIRED`: –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ (—Å delta +20-30 —Å–µ–∫)

#### –†—É—á–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã:
- –õ—é–±–æ–π —Å—Ç–∞—Ç—É—Å ‚Üí —Å–±—Ä–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º (–Ω–æ–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞)

### 1.3 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ–ø—ã—Ç–æ–∫

#### –ü—Ä–∞–≤–∏–ª–∞ –æ—á–∏—Å—Ç–∫–∏:
- –ù–∏–∫–∞–∫–∏—Ö `IN_PROGRESS` –Ω–µ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –ë–î –¥–æ–ª—å—à–µ 24 —á–∞—Å–æ–≤
- –ï—Å–ª–∏ –ø–æ–ø—ã—Ç–∫–∞ `IN_PROGRESS` –∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞ > 24—á ‚Üí `EXPIRED`
- –ï—Å–ª–∏ –ø–æ–ø—ã—Ç–∫–∞ `STARTED` –∏ –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ `IN_PROGRESS` > 1—á ‚Üí —É–¥–∞–ª–∏—Ç—å

#### –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏:
```python
# src/service/test_cleanup.py
async def cleanup_stale_attempts(session: AsyncSession):
    """–û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–∏—Å—à–∏—Ö –ø–æ–ø—ã—Ç–æ–∫"""
    # IN_PROGRESS –¥–æ–ª—å—à–µ 24 —á–∞—Å–æ–≤ ‚Üí EXPIRED
    # STARTED –¥–æ–ª—å—à–µ 1 —á–∞—Å–∞ ‚Üí —É–¥–∞–ª–∏—Ç—å
    pass
```

---

## 2. –î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞

### 2.1 –ó–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–∞–º

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- –°—Ç—É–¥–µ–Ω—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ API –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤) –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
- –§—Ä–æ–Ω—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç, –Ω–æ –±—ç–∫ –¥–æ–ª–∂–µ–Ω –∂–µ—Å—Ç–∫–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```python
# Middleware –∏–ª–∏ guard –¥–ª—è API –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤
async def check_no_active_test(
    session: AsyncSession,
    user_id: int
) -> None:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞"""
    active_attempt = await get_active_attempt_for_student(session, user_id)
    if active_attempt:
        raise HTTPException(
            status_code=403,
            detail="–î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞"
        )
```

#### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /api/v1/subsections/{subsection_id}` ‚ùå
- `GET /api/v1/subsections/{subsection_id}/content` ‚ùå
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —á—Ç–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ ‚ùå

### 2.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

#### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```python
async def get_active_attempt_for_student(
    session: AsyncSession,
    user_id: int
) -> Optional[TestAttempt]:
    """–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –ø–æ–ø—ã—Ç–∫—É —Å—Ç—É–¥–µ–Ω—Ç–∞"""
    stmt = select(TestAttempt).where(
        and_(
            TestAttempt.user_id == user_id,
            TestAttempt.status == TestAttemptStatus.IN_PROGRESS
        )
    )
    result = await session.execute(stmt)
    return result.scalar_one_or_none()
```

---

## 3. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### 3.1 –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤

#### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

#### –ù–æ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –°–ª–µ–¥—É—é—â–∏–π –ø–æ–¥—Ä–∞–∑–¥–µ–ª –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ

#### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```python
async def check_subsection_availability(
    session: AsyncSession,
    subsection_id: int,
    user_id: int
) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞"""
    # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã —Ä–∞–∑–¥–µ–ª–∞ –≤ –ø–æ—Ä—è–¥–∫–µ
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
    # completion_percentage >= 80% –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
    pass
```

### 3.2 –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ –ø–æ —Ç–∏–ø–∞–º

#### –¢–µ—Å—Ç—ã —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏:
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É –≤ —Ä–∞–∑–¥–µ–ª–µ
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è

#### –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ —Ä–∞–∑–¥–µ–ª—É:
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ —Ä–∞–∑–¥–µ–ª–∞
- ‚úÖ completion_percentage >= 80% –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤

#### –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –ø–æ —Ç–µ–º–µ:
- ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —Ç–µ–º—ã
- ‚úÖ completion_percentage >= 80% –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤

#### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```python
async def check_test_availability_for_student(
    session: AsyncSession,
    test_id: int,
    user_id: int
) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞"""
    test = await get_test_by_id(session, test_id)

    if test.type == TestType.HINTED:
        return True  # –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–≥–¥–∞

    elif test.type == TestType.SECTION_FINAL:
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ —Ä–∞–∑–¥–µ–ª–∞
        return await check_section_completion(session, test.section_id, user_id)

    elif test.type == TestType.GLOBAL_FINAL:
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —Ç–µ–º—ã
        return await check_topic_completion(session, test.topic_id, user_id)
```

---

## 4. –°–±—Ä–æ—Å –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º

### 4.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É —Å—Ç—É–¥–µ–Ω—Ç–∞
- –°—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
- –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏

### 4.2 API —ç–Ω–¥–ø–æ–∏–Ω—Ç:
```python
@router.post("/attempts/{attempt_id}/reset")
async def reset_student_attempt(
    attempt_id: int,
    session: AsyncSession = Depends(get_db),
    current_user=Depends(require_roles(Role.ADMIN, Role.TEACHER))
):
    """–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É —Å—Ç—É–¥–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)"""
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ç–µ—Å—Ç
    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å FAILED –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å RESET
    # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–ø—ã—Ç–∫—É? –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—Ç–∏—Ç—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?
    pass
```

### 4.3 –õ–æ–≥–∏–∫–∞ —Å–±—Ä–æ—Å–∞:
```python
async def reset_attempt_for_student(
    session: AsyncSession,
    attempt_id: int,
    teacher_id: int
) -> None:
    """–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É —Å—Ç—É–¥–µ–Ω—Ç–∞"""
    attempt = await get_attempt_by_id(session, attempt_id)

    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
    await ensure_can_manage_test(session, attempt.test_id, teacher_id)

    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
    attempt.status = TestAttemptStatus.RESET
    attempt.completed_at = datetime.utcnow()

    # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
    logger.info(f"–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å {teacher_id} —Å–±—Ä–æ—Å–∏–ª –ø–æ–ø—ã—Ç–∫—É {attempt_id} —Å—Ç—É–¥–µ–Ω—Ç–∞ {attempt.user_id}")

    await session.commit()
```

---

## 5. –¢–∞–π–º–µ—Ä—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

### 5.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- –§—Ä–æ–Ω—Ç –∂–µ—Å—Ç–∫–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ç–µ—Å—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –ë—ç–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º—è–≥—á–µ —Å delta +20-30 —Å–µ–∫—É–Ω–¥
- –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞—Ç—å –∑–∞–≤–∏—Å—à–∏–µ –ø–æ–ø—ã—Ç–∫–∏

### 5.2 –õ–æ–≥–∏–∫–∞ —Ç–∞–π–º–µ—Ä–∞:
```python
async def check_expired_attempts(session: AsyncSession) -> None:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏—Å—Ç–µ–∫—à–∏–µ –ø–æ–ø—ã—Ç–∫–∏"""
    now = datetime.utcnow()

    # –ù–∞–π—Ç–∏ IN_PROGRESS –ø–æ–ø—ã—Ç–∫–∏ —Å –∏—Å—Ç–µ–∫—à–∏–º –≤—Ä–µ–º–µ–Ω–µ–º
    expired_attempts = await session.execute(
        select(TestAttempt).where(
            and_(
                TestAttempt.status == TestAttemptStatus.IN_PROGRESS,
                TestAttempt.started_at + timedelta(minutes=TestAttempt.test.duration + 0.5) < now  # +30 —Å–µ–∫ delta
            )
        )
    )

    for attempt in expired_attempts.scalars():
        attempt.status = TestAttemptStatus.EXPIRED
        attempt.completed_at = now
        logger.info(f"–ü–æ–ø—ã—Ç–∫–∞ {attempt.id} –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É")

    await session.commit()
```

### 5.3 Background –∑–∞–¥–∞—á–∞:
```python
# src/tasks/attempt_monitor.py
async def monitor_attempt_timeouts():
    """–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤ –ø–æ–ø—ã—Ç–æ–∫"""
    while True:
        async with get_db_session() as session:
            await check_expired_attempts(session)
        await asyncio.sleep(60)  # –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
```

---

## 6. –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

### 6.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ heartbeat (–∫–∞–∫ –≤ —Ç—Ä–µ–∫–∏–Ω–≥–µ)
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –∫ —Ç–µ—Å—Ç—É

### 6.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
```python
# TestAttempt.answers - JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
{
  "question_id_1": {
    "answer": "user_answer",
    "timestamp": "2024-01-01T10:00:00Z",
    "time_spent": 120  # —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å
  },
  "question_id_2": {
    "answer": ["option1", "option2"],
    "timestamp": "2024-01-01T10:02:00Z",
    "time_spent": 95
  }
}
```

### 6.3 Heartbeat –º–µ—Ö–∞–Ω–∏–∑–º:
```python
@router.post("/attempts/{attempt_id}/heartbeat")
async def save_attempt_progress(
    attempt_id: int,
    progress_data: AttemptProgressSchema,
    session: AsyncSession = Depends(get_db),
    current_user=Depends(get_current_user)
):
    """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–∞"""
    attempt = await get_attempt_by_id(session, attempt_id)

    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Å—Ç—É–¥–µ–Ω—Ç—É
    if attempt.user_id != int(current_user["sub"]):
        raise HTTPException(403, "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω")

    # –û–±–Ω–æ–≤–∏—Ç—å answers –≤ attempt
    current_answers = attempt.answers or {}
    current_answers.update(progress_data.answers)

    attempt.answers = current_answers
    attempt.updated_at = datetime.utcnow()

    await session.commit()

    return {"status": "saved"}
```

---

## 7. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —ç—Ç–∞–ø–∞–º

### –≠—Ç–∞–ø 1: –ú–æ–¥–µ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã ‚úÖ –ó–ê–í–ï–†–®–ï–ù (1 –¥–µ–Ω—å)
- [x] –û–±–Ω–æ–≤–∏—Ç—å TestAttemptStatus enum (–¥–æ–±–∞–≤–ª–µ–Ω—ã FAILED, EXPIRED)
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è —Ç–∞–π–º–µ—Ä–æ–≤ –≤ TestAttempt –º–æ–¥–µ–ª—å (last_activity_at, expires_at, auto_extend_count)
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ TestAttempt –º–æ–¥–µ–ª—å (last_save_at, draft_answers, cleanup_scheduled_at)
- [x] –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Alembic

### –≠—Ç–∞–ø 2: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚úÖ –ó–ê–í–ï–†–®–ï–ù (2 –¥–Ω—è)
- [x] –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É start_test (–¥–æ–±–∞–≤–ª–µ–Ω expires_at –∏ last_activity_at)
- [x] –°–æ–∑–¥–∞—Ç—å TestCleanupService –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ–ø—ã—Ç–æ–∫
- [x] –°–æ–∑–¥–∞—Ç—å MaterialAccessService –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è heartbeat –º–µ—Ö–∞–Ω–∏–∑–º–∞

### –≠—Ç–∞–ø 3: –°–µ—Ä–≤–∏—Å—ã ‚úÖ –ó–ê–í–ï–†–®–ï–ù (2 –¥–Ω—è)
- [x] –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ (TestCleanupService)
- [x] –°–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (MaterialAccessService)
- [x] –°–µ—Ä–≤–∏—Å —Ç–∞–π–º–µ—Ä–æ–≤ –∏ –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (—Ä–∞—Å—à–∏—Ä–µ–Ω TestCleanupService)
- [x] –°–µ—Ä–≤–∏—Å —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏
- [x] –°–µ—Ä–≤–∏—Å heartbeat –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ TestCleanupService)

### –≠—Ç–∞–ø 4: API ‚úÖ –ó–ê–í–ï–†–®–ï–ù (2 –¥–Ω—è)
- [x] Guards –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ MaterialAccessService)
- [x] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫ (reset_test_attempts_endpoint)
- [x] Heartbeat –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö (POST /{test_id}/heartbeat)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —Ç–∞–π–º–µ—Ä–æ–≤
- [x] API –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ MaterialAccessService)

### –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ –ó–ê–í–ï–†–®–ï–ù (2 –¥–Ω—è)
- [x] Unit —Ç–µ—Å—Ç—ã –¥–ª—è TestCleanupService (—Å–æ–∑–¥–∞–Ω—ã)
- [x] Unit —Ç–µ—Å—Ç—ã –¥–ª—è MaterialAccessService (—Å–æ–∑–¥–∞–Ω—ã)
- [x] Integration —Ç–µ—Å—Ç—ã API heartbeat (—Å–æ–∑–¥–∞–Ω—ã)
- [x] Integration —Ç–µ—Å—Ç—ã API —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫ (—Å–æ–∑–¥–∞–Ω—ã)
- [x] –¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ (–≤–∫–ª—é—á–µ–Ω—ã –≤ unit —Ç–µ—Å—Ç—ã)
- [x] –¢–µ—Å—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–≤–∫–ª—é—á–µ–Ω—ã –≤ unit —Ç–µ—Å—Ç—ã)
- [x] –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã (6/6 –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ)
- [x] Mock —Ç–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (7/7 –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ)
- [‚ö†Ô∏è] –ü—Ä–æ–±–ª–µ–º–∞ —Å async fixtures - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

---

## üéØ **–ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò**

### ‚úÖ **–ß–¢–û –°–î–ï–õ–ê–ù–û:**
- **TestAttemptStatus enum:** –î–æ–±–∞–≤–ª–µ–Ω—ã FAILED –∏ EXPIRED —Å—Ç–∞—Ç—É—Å—ã ‚úÖ

### ‚ùå **–ß–¢–û –ù–ï –°–î–ï–õ–ê–ù–û:**
- **–ú–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏:** –ù–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è —Ç–∞–π–º–µ—Ä–æ–≤ ‚ùå
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã –æ—á–∏—Å—Ç–∫–∏ –∏ —Å–±—Ä–æ—Å–∞ ‚ùå
- **–°–µ—Ä–≤–∏—Å—ã:** –ù–µ —Å–æ–∑–¥–∞–Ω—ã —Å–µ—Ä–≤–∏—Å—ã –æ—á–∏—Å—Ç–∫–∏, —Ç–∞–π–º–µ—Ä–æ–≤, –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚ùå
- **API:** –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã guards –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–±—Ä–æ—Å–∞ ‚ùå
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–µ –Ω–∞—á–∞—Ç–æ ‚ùå

### üî• **–ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£:**
**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ø—ã—Ç–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâüöÄ**

### üìä **–ü–û–ö–†–´–¢–ò–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï–ú:**
- **Unit —Ç–µ—Å—Ç—ã:** 6 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è TestCleanupService, 5 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è MaterialAccessService
- **Integration —Ç–µ—Å—Ç—ã:** 4 —Ç–µ—Å—Ç–∞ –¥–ª—è heartbeat API, 5 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è reset attempts API
- **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 15 —Ç–µ—Å—Ç–æ–≤, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´:**

#### **–ú–æ–¥–µ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã:**
- ‚úÖ TestAttemptStatus enum (STARTED, IN_PROGRESS, COMPLETED, FAILED, EXPIRED)
- ‚úÖ –ù–æ–≤—ã–µ –ø–æ–ª—è: last_activity_at, expires_at, auto_extend_count
- ‚úÖ –ü–æ–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: last_save_at, draft_answers

#### **–°–µ—Ä–≤–∏—Å—ã:**
- ‚úÖ TestCleanupService - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º
- ‚úÖ MaterialAccessService - guards –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ Heartbeat –º–µ—Ö–∞–Ω–∏–∑–º –≤ TestCleanupService

#### **API:**
- ‚úÖ Guards –≤ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (/sections/, /subsections/)
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–±—Ä–æ—Å–∞ –ø–æ–ø—ã—Ç–æ–∫ (POST /tests/{test_id}/reset-attempts)
- ‚úÖ Heartbeat —ç–Ω–¥–ø–æ–∏–Ω—Ç (POST /tests/{test_id}/heartbeat)
- ‚úÖ –¢–∞–π–º–µ—Ä—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö

#### **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
- ‚úÖ check_sequential_section_access
- ‚úÖ check_sequential_subsection_access
- ‚úÖ check_sequential_topic_access

**–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –ø–ª–∞–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã! üöÄ**

---

## 8. –†–∏—Å–∫–∏ –∏ mitigation

### 8.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏
- **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö:** –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
- **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ:** Delta –≤—Ä–µ–º—è, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
- **–ó–∞–≤–∏—Å—à–∏–µ –ø–æ–ø—ã—Ç–∫–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 8.2 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏
- **UX –ø—Ä–æ–±–ª–µ–º—ã:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## 9. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞** - –¥–µ—Ç–∞–ª—å–Ω–æ –∏–∑—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
2. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π** - –æ–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã
3. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤** - –Ω–∞—á–∞—Ç—å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏
4. **API –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –¥–æ–±–∞–≤–∏—Ç—å guards –∏ –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
